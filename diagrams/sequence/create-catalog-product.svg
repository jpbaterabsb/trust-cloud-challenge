<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="763px" preserveAspectRatio="none" style="width:1242px;height:763px;background:#FFFFFF;" version="1.1" viewBox="0 0 1242 763" width="1242px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="375" x="435" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="365" x="440" y="27.9951">Creating a Catalog Product Sequence Diagram</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="118.5938" y2="682.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="362" x2="362" y1="118.5938" y2="682.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="786.5" x2="786.5" y1="118.5938" y2="682.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1201" x2="1201" y1="118.5938" y2="682.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="5" y="115.292">Client</text><ellipse cx="27.5" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M27.5,58.7969 L27.5,85.7969 M14.5,66.7969 L40.5,66.7969 M27.5,85.7969 L14.5,100.7969 M27.5,85.7969 L40.5,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="5" y="694.7139">Client</text><ellipse cx="27.5" cy="706.5156" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M27.5,714.5156 L27.5,741.5156 M14.5,722.5156 L40.5,722.5156 M27.5,741.5156 L14.5,756.5156 M27.5,741.5156 L40.5,756.5156 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="296" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="303" y="107.292">CatalogController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="296" y="681.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="303" y="701.7139">CatalogController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="728.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="735.5" y="107.292">CatalogService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="728.5" y="681.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="735.5" y="701.7139">CatalogService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1162" y="115.292">CatalogDB</text><path d="M1183.5,66.2969 C1183.5,56.2969 1201.5,56.2969 1201.5,56.2969 C1201.5,56.2969 1219.5,56.2969 1219.5,66.2969 L1219.5,92.2969 C1219.5,102.2969 1201.5,102.2969 1201.5,102.2969 C1201.5,102.2969 1183.5,102.2969 1183.5,92.2969 L1183.5,66.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1183.5,66.2969 C1183.5,76.2969 1201.5,76.2969 1201.5,76.2969 C1201.5,76.2969 1219.5,76.2969 1219.5,66.2969 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1162" y="694.7139">CatalogDB</text><path d="M1183.5,708.0156 C1183.5,698.0156 1201.5,698.0156 1201.5,698.0156 C1201.5,698.0156 1219.5,698.0156 1219.5,708.0156 L1219.5,734.0156 C1219.5,744.0156 1201.5,744.0156 1201.5,744.0156 C1201.5,744.0156 1183.5,744.0156 1183.5,734.0156 L1183.5,708.0156 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1183.5,708.0156 C1183.5,718.0156 1201.5,718.0156 1201.5,718.0156 C1201.5,718.0156 1219.5,718.0156 1219.5,708.0156 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="350.5,145.7266,360.5,149.7266,350.5,153.7266,354.5,149.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27.5" x2="356.5" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="34.5" y="144.6606">POST /catalogs/:catalogId/products</text><polygon fill="#181818" points="774.5,174.8594,784.5,178.8594,774.5,182.8594,778.5,178.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="362.5" x2="780.5" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="400" x="369.5" y="173.7935">createCatalogProduct(catalogId, user, addCatalogProductDTO)</text><polygon fill="#181818" points="1189.5,203.9922,1199.5,207.9922,1189.5,211.9922,1193.5,207.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="1195.5" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="793.5" y="202.9263">findById(catalogId)</text><polygon fill="#181818" points="797.5,233.125,787.5,237.125,797.5,241.125,793.5,237.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="791.5" x2="1200.5" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="803.5" y="232.0591">Catalog Data</text><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="828.5" y1="266.2578" y2="266.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="828.5" x2="828.5" y1="266.2578" y2="279.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="787.5" x2="828.5" y1="279.2578" y2="279.2578"/><polygon fill="#181818" points="797.5,275.2578,787.5,279.2578,797.5,283.2578,793.5,279.2578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="388" x="793.5" y="261.1919">check if catalog exists and if user has necessary permissions</text><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="828.5" y1="308.3906" y2="308.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="828.5" x2="828.5" y1="308.3906" y2="321.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="787.5" x2="828.5" y1="321.3906" y2="321.3906"/><polygon fill="#181818" points="797.5,317.3906,787.5,321.3906,797.5,325.3906,793.5,321.3906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="360" x="793.5" y="303.3247">createOrUpdateCatalogProduct(addCatalogProductDTO)</text><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="828.5" y1="350.5234" y2="350.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="828.5" x2="828.5" y1="350.5234" y2="363.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="787.5" x2="828.5" y1="363.5234" y2="363.5234"/><polygon fill="#181818" points="797.5,359.5234,787.5,363.5234,797.5,367.5234,793.5,363.5234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="793.5" y="345.4575">check if product has master product reference</text><polygon fill="#181818" points="1189.5,388.6563,1199.5,392.6563,1189.5,396.6563,1193.5,392.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="1195.5" y1="392.6563" y2="392.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="391" x="793.5" y="387.5903">getMasterProductByPartNumber(masterProductPartNumber)</text><polygon fill="#181818" points="797.5,417.7891,787.5,421.7891,797.5,425.7891,793.5,421.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="791.5" x2="1200.5" y1="421.7891" y2="421.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="803.5" y="416.7231">Master Product Data</text><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="828.5" y1="450.9219" y2="450.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="828.5" x2="828.5" y1="450.9219" y2="463.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="787.5" x2="828.5" y1="463.9219" y2="463.9219"/><polygon fill="#181818" points="797.5,459.9219,787.5,463.9219,797.5,467.9219,793.5,463.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="345" x="793.5" y="445.856">check if master product exists and price check passes</text><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="828.5" y1="493.0547" y2="493.0547"/><line style="stroke:#181818;stroke-width:1.0;" x1="828.5" x2="828.5" y1="493.0547" y2="506.0547"/><line style="stroke:#181818;stroke-width:1.0;" x1="787.5" x2="828.5" y1="506.0547" y2="506.0547"/><polygon fill="#181818" points="797.5,502.0547,787.5,506.0547,797.5,510.0547,793.5,506.0547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="793.5" y="487.9888">merge product data with master product data</text><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="828.5" y1="535.1875" y2="535.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="828.5" x2="828.5" y1="535.1875" y2="548.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="787.5" x2="828.5" y1="548.1875" y2="548.1875"/><polygon fill="#181818" points="797.5,544.1875,787.5,548.1875,797.5,552.1875,793.5,548.1875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="793.5" y="530.1216">remove null or undefined values</text><polygon fill="#181818" points="1189.5,573.3203,1199.5,577.3203,1189.5,581.3203,1193.5,577.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="1195.5" y1="577.3203" y2="577.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="793.5" y="572.2544">upsertCatalogProduct(persistProduct)</text><polygon fill="#181818" points="797.5,602.4531,787.5,606.4531,797.5,610.4531,793.5,606.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="791.5" x2="1200.5" y1="606.4531" y2="606.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="803.5" y="601.3872">Catalog Product Data</text><polygon fill="#181818" points="373.5,631.5859,363.5,635.5859,373.5,639.5859,369.5,635.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="367.5" x2="785.5" y1="635.5859" y2="635.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="379.5" y="630.52">created catalog product data</text><polygon fill="#181818" points="38.5,660.7188,28.5,664.7188,38.5,668.7188,34.5,664.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="32.5" x2="361.5" y1="664.7188" y2="664.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311" x="44.5" y="659.6528">return created catalog product data as response</text><!--MD5=[2185b9e3ff0580d2b98658a7dc043464]
@startuml
title Creating a Catalog Product Sequence Diagram

actor Client
participant CatalogController
participant CatalogService
database CatalogDB

Client -> CatalogController: POST /catalogs/:catalogId/products
CatalogController -> CatalogService: createCatalogProduct(catalogId, user, addCatalogProductDTO)
CatalogService -> CatalogDB: findById(catalogId)
CatalogDB - -> CatalogService: Catalog Data
CatalogService -> CatalogService: check if catalog exists and if user has necessary permissions
CatalogService -> CatalogService: createOrUpdateCatalogProduct(addCatalogProductDTO)
CatalogService -> CatalogService: check if product has master product reference
CatalogService -> CatalogDB: getMasterProductByPartNumber(masterProductPartNumber)
CatalogDB - -> CatalogService: Master Product Data
CatalogService -> CatalogService: check if master product exists and price check passes
CatalogService -> CatalogService: merge product data with master product data
CatalogService -> CatalogService: remove null or undefined values
CatalogService -> CatalogDB: upsertCatalogProduct(persistProduct)
CatalogDB - -> CatalogService: Catalog Product Data
CatalogService - -> CatalogController: created catalog product data
CatalogController - -> Client: return created catalog product data as response
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>